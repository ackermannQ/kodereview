{"componentChunkName":"component---src-templates-blog-post-js","path":"/strategy-pattern/","result":{"data":{"site":{"siteMetadata":{"title":"codeReview~"}},"markdownRemark":{"id":"9e9cce27-c3f2-5887-8741-71194c577959","excerpt":"As explained in the Design Patterns article, the purpose is for your system to be ready for changes. Tight coupling would require hard work to implement…","html":"<p>As explained in the <a href=\"../design-patterns/\">Design Patterns</a> article, the purpose is for your system to be ready for changes. Tight coupling would require hard work to implement something that would satisfy your customer request.<br>\nThis pattern is widely used in order to separate what may change in an application from what should stay the same.<br>\nAnd it’s also one of the simplest pattern to learn so let’s get a grasp on our first design pattern.</p>\n<h2>Theory</h2>\n<h3>Main idea</h3>\n<p>The idea is to take what is going to change in your software, encapsulate and isolate it.<br>\nThis would help you have a hierarchy between your classes and object, and not duplicate code between similar objects.<br>\nAt the end of the day your methods, that are similar but show different behaviours should vary independently than the other aspects of the client.  </p>\n<p><em>A client is anything, it could be objects, services … whatever</em> </p>\n<p>The main pitfall there is failing to identify the logic that should be separated from your clients. Worst case scenario, you use inheritence to create classes that are different but sharing common method.<br>\nThis is called code duplication and this is <em>bad</em>, bad, <strong>bad</strong>.</p>\n<h3>Use case</h3>\n<p>Let’s say you work for a company selling online articles - like Amazon. You are currently working on the backend, more specifically on the checkout part.<br>\nYou may have built an Article class looking like :  </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 146px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/codeReview/static/0395422d6224d537e25bc46cf70e10d0/4fcfe/badImpl_articleClass.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 85.6164383561644%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAADUklEQVQ4y5WT6VOaVxjF+XOdJjOJNhoxboliBRQjoCxiWtuZJqmtW8QdXFAQRfZFNjcQBNyzNon5dd6rRswkH/rhzDP3vu899zzPOVcWd+s5TWgpRbUcSohd1pO4nqSrnYHeCn43VjA0cI/nfT+RC3RxvKnnKKblKKYTOIzqOEt0E1s1Iws7OjmNdXAU0XAc1XAY7qQQUHO2+ZTd9V+YG6xi/I+7jA7c4Z/+CnbW2igGOzjwqzgIqAXyfjVHYSVBhw7Z9oaeQkhFwqkg4Wwl61NxsvmU0OJjYsstZLwq3qb1kDMLvN/uEet3ZXib0vNpV0fKY0KWDRpIuVuZflnJslXOxmwDHzMGnBN1rLyqZXjgLp7ZBihauMgYYN8EuW8g7RVNZAL9yPJhI8fRTpJOBXsbSt5v6UmvKkistLCz3s6H7Z6rg+Ybgrz59nrfDCUT2eAzZHF3N4tj1cz+/TNzQw9IuduIOJ4w9Vcl04NVlKJdvEnreJ3S8UZqb0sysZuzpJZ3Uvtbes5TOl4nu4iuGpCFljUEFxpZfFWLc7KOpfHLahupYXlCjmO8lthKK/aRahxWObbhajZdCnz2JqwvK1kYe4h7poFCWEVopeey5ZyvncjSEzzT9Xhn6vHNNeKdayC00IxtsErMVTLHM1PP2mQd+WAH+z4VS6M1rFrlTL2ohP0e8pFfkWUCvWy5W8XPjtEaXBNy1qYe4bU1ErA38SljwGdrZGmkRlwUWXzMZ8mcfJ8wilI/XyRTDgzs+i2SQhO76wrhqBQbn6RsvlnMUrrkPKnlINhBfKWFmKNFqPq42yucvcgYr2CCgpE9iTATMBBebGJp7CHTL+5jH67GP9+E0ypnx9POnlfJ5PP7uCbqREY5/Y0vWaOAiIsgLiPMhYzkA0qC880UQ51Czb5fTdrdRsZ3GeqsVymidJ7oFgTXZNf1IltGmA0Y8EzLGf/zHrahB7inHpELqEXQpb3zhBYO+6FgEdn7qixrulFYTii5/GFbSynSRTGs4TjWxb87PZe5S+nEjCSS61qu7LuE0gwpmL6+1Vsqbg3+x/i8Z4T8lcvFmBlOLFDsu0HJ8v8gxee0j3zkGbJ1m4a0W0ncqSLh+j7iTqXAj7+rSLvbWbfr+Q8ypVMyx6Fe4gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"bad implementation\"\n        title=\"bad implementation\"\n        src=\"/codeReview/static/0395422d6224d537e25bc46cf70e10d0/4fcfe/badImpl_articleClass.png\"\n        srcset=\"/codeReview/static/0395422d6224d537e25bc46cf70e10d0/4fcfe/badImpl_articleClass.png 146w\"\n        sizes=\"(max-width: 146px) 100vw, 146px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>The article has a name, a price and you can get its attributes or pay. Great!  </p>\n<p>Now, what would happen if you decide that you need an other means to pay. Let’s say you want to give the opportunity to your customer to buy an article using Paypal, how would you implement this logic ?</p>\n<p>Well, you could abstract the Article class, along with the pay() method. You would then have two classes ArticleCard and ArticlePaypal.\nThe pay method in ArticleCard should take in argument:</p>\n<ul>\n<li>cardNumber</li>\n<li>expirationDate</li>\n<li>cryptogram</li>\n</ul>\n<p>The pay method in ArticlePaypal should take in argument:</p>\n<ul>\n<li>id</li>\n<li>password</li>\n</ul>\n<p>What if now, you would have a brand new e-payment method coming on the market that would require:</p>\n<ul>\n<li>id</li>\n<li>password</li>\n<li>creditCard</li>\n</ul>\n<p>What if now, you would have an other card payment method, not with a credit card, but taking the same arguments:</p>\n<ul>\n<li>giftCardNumber</li>\n<li>expirationDate</li>\n<li>cryptogram</li>\n</ul>\n<p>This would be unmaintenable and we would have to duplicate heavily our code.<br>\nLet’s see in practice how we could solve this problem using the strategy pattern.</p>\n<h2>Implementation - Example</h2>\n<h3>Bad implementation</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 408px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/codeReview/static/c12a8b13adac9867ae86660a142ff7cd/e7c18/badImpl_articleCardClass.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.10126582278481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB+0lEQVQoz42R+0uTcRTG37+5+iWokIxwOZ1z7eJs+8E0NbIgNeiCothluNG23H3TXd7Lmm7u6ntr7yf2ToYERQc+53B4Hh7Ol6/QET/RVQ7pygdk429JHr9BLn6w97a4R1v+gmnqjKpdP6Yn79ORD8gnt/n+bYvij52JtyVFEDL7tyl8nqKdeYJamrdnP+9ELc6jFmfpFQNoat8OPI15yR3e5Szy0NZH3m5uFq3kQi85aeXDCJF3d4h9nEJJzKGeeqERGvNzxDJDeRVdG9iBhWiQxN49GicurkpeUJZBDmJJQZAD9CsbCF93bhF5f5/M0TSVqIOLtIvz1DzNzAIXKSedUmgSWI4/I334gPTRNFnbP0M15qAcdVCNPaaaDCFcpmbo5D1cZhdoZVy0Mgt24GXWTTPtpHcaxtAHWECv/AL9zI125sOs+LDEgM1QDIDks3WhHn9EM+2mX1gEJXiDZVACmOLK5MJGboV6wsH5iYtuwQNSEEtcGj9ZCtAvryNcFecwKkuYVf9YnBAE0Y9eGweOLlRra6B4QPGD7APRC5L3enrol58jWJVZkP3XwtMbjEyLmLUwujb+5W5tF01cQxM30cQNNGlzgi6t06nuIgwqq2jyazTp1R9soUsvGUjbGLpqBxqGiab/HcP4hWCYQ/6FaQ6xLLBG7T/qNzuHwiWwxIadAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"bad implementation\"\n        title=\"bad implementation\"\n        src=\"/codeReview/static/c12a8b13adac9867ae86660a142ff7cd/e7c18/badImpl_articleCardClass.png\"\n        srcset=\"/codeReview/static/c12a8b13adac9867ae86660a142ff7cd/c26ae/badImpl_articleCardClass.png 158w,\n/codeReview/static/c12a8b13adac9867ae86660a142ff7cd/6bdcf/badImpl_articleCardClass.png 315w,\n/codeReview/static/c12a8b13adac9867ae86660a142ff7cd/e7c18/badImpl_articleCardClass.png 408w\"\n        sizes=\"(max-width: 408px) 100vw, 408px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>As explained, the implementation would work, the issue here is you would have to create the same amount of classes corresponding to each payment method with their own specificities. Besides, adding such things as expiration date or cryptogram not related to an Article is a bad practice.  </p>\n<h3>Using the strategy pattern</h3>\n<p>What was the principle of the strategy pattern ?<br>\n“Defines a family of algorithms, encapsulate each one, and make them interchangeable.”  </p>\n<p><img src=\"./goodImpl_diagram.png\" alt=\"Using the pattern strategy\"></p>\n<p>The interface IPayment and it implementation are thought as a family of algorithms.<br>\nThe client (Article and inherited classes) makes use of this family of algorithms.  </p>\n<p>The idea here is using composition instead of inheriting the “behaviour” payment because it ultimately gives more flexibility to your system.  </p>\n<p>Let’s see what would the implementation (in Java) looks like:  </p>\n<p><strong>IPayment</strong>:  </p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">IPayment</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">void</span> <span class=\"token function\">pay</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> price<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Simple interface with a pay method. We will use it to define a family of algorithms.</p>\n<p><strong>CardPayment</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CardPayment</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">IPayment</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> cardNumber<span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> cryptogram<span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> expirationDate<span class=\"token punctuation\">;</span>\n\n   <span class=\"token keyword\">public</span> <span class=\"token class-name\">CardPayment</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> cardNumber<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> cryptogram<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> expirationDate<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cardNumber <span class=\"token operator\">=</span> cardNumber<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cryptogram <span class=\"token operator\">=</span> cryptogram<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>expirationDate <span class=\"token operator\">=</span> expirationDate<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token annotation punctuation\">@Override</span>\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">pay</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> price<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Currently paying with a credit card: \"</span><span class=\"token operator\">+</span> price  <span class=\"token operator\">+</span> <span class=\"token string\">\" $\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This class implements the IPayment interface, and has all the specificities related to its specific behaviour (cardNumber, cryptogram, expirationDate). </p>\n<p><strong>PaypalPayment</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">PaypalPayment</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">IPayment</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> id<span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> password<span class=\"token punctuation\">;</span>\n\n   <span class=\"token keyword\">public</span> <span class=\"token class-name\">PaypalPayment</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> id<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> password<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> id<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>password <span class=\"token operator\">=</span> password<span class=\"token punctuation\">;</span>\n\n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token annotation punctuation\">@Override</span>\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">pay</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> price<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Currently paying with Paypal: \"</span> <span class=\"token operator\">+</span> price <span class=\"token operator\">+</span> <span class=\"token string\">\" $\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This class implements the IPayment interface, and has all the specificities related to its specific behaviour (id and password).</p>\n<p>As you can see, we took what would change in our system (the payment method) and encapsulated it. Now, it’s going to be easier to chose the payment method we want, but first let’s see how is implemented the Article class.</p>\n<p><strong>Article</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Article</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">private</span> <span class=\"token keyword\">float</span> price<span class=\"token punctuation\">;</span>\n   <span class=\"token class-name\">IPayment</span> paymentBehaviour<span class=\"token punctuation\">;</span>\n\n   <span class=\"token keyword\">public</span> <span class=\"token class-name\">Article</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span> price<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>price <span class=\"token operator\">=</span> price<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">float</span> <span class=\"token function\">getPrice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>price<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">float</span> <span class=\"token function\">setPaymentBehaviour</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">IPayment</span> payment<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      paymentBehaviour <span class=\"token operator\">=</span> payment<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">performPayment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">float</span> price <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getPrice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      paymentBehaviour<span class=\"token punctuation\">.</span><span class=\"token function\">pay</span><span class=\"token punctuation\">(</span>price<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">/* This is called delegation. It allows you to not precise there the method that would actually do the payment  */</span>\n   <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>Book</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Book</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Article</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Book</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span> price<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> price<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        paymentBehaviour <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CardPayment</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"12345678978975\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"000\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"01/01\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This is in the Book class that the payment behaviour is described (here it’s the CardPayment method). This is powerfull, the paymentBehaviour is set in the class but the card payment behaviour is not currently set there, it lives somewhere else. Thus, you just need to implement as many new payment methods as you like and call them where you need too.</p>\n<p><strong>Movie</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Movie</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Article</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Movie</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span> price<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> price<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        paymentBehaviour <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PaypalPayment</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"85211\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"pass\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>If we wouldn’t have used the strategy pattern and we would have wanted to pay with a card here too, we would have had to duplicate code or inherit it. Then we may have passed unnecessarily this method to childs classes that we should then override … and so. You probably now have the feeling that this would be very complicated when things may have been designed well from the begining.  </p>\n<p>You probably wonder what is the method:  </p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">float</span> <span class=\"token function\">setPaymentBehaviour</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">IPayment</span> payment<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   paymentBehaviour <span class=\"token operator\">=</span> payment<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>It actually allows you to set dynamically at the runtime a payment method.<br>\nFinally, we have the following program running:</p>\n<p><strong>Main</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Main</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token class-name\">Book</span> book <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Book</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Book\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">35</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token class-name\">Movie</span> movie <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Movie</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Movie\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"I'm buying a: \"</span> <span class=\"token operator\">+</span> book<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      book<span class=\"token punctuation\">.</span><span class=\"token function\">performPayment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"I'm buying a: \"</span> <span class=\"token operator\">+</span> movie<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      movie<span class=\"token punctuation\">.</span><span class=\"token function\">performPayment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      book<span class=\"token punctuation\">.</span><span class=\"token function\">setPaymentBehaviour</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">PaypalPayment</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"85211\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"pass\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"I changed the payment method for buying a: \"</span> <span class=\"token operator\">+</span> book<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      book<span class=\"token punctuation\">.</span><span class=\"token function\">performPayment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Giving the following output:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">I&#39;m buying a: Book\nCurrently paying with a card: 35.0 $\n\nI&#39;m buying a: Movie\nCurrently paying with Paypal: 9.0 $\n\nI changed the payment method for buying a: Book\nCurrently paying with Paypal: 35.0 $</code></pre></div>\n<h2>To conclude - The key takeaways</h2>\n<p>As you could see from this example, a bad implementation would have forced a developer to duplicate code and make future evolutions of the software very difficult.<br>\nBy encapsulating the behaviour in a family of algorithms, the changing part of the software could remain independent from the client, providing great flexibility !  </p>\n<ul>\n<li>Identify the logic that should be separated from your clients</li>\n<li>Defines a family of algorithms, encapsulate each one, and make them interchangeable</li>\n<li>You probably noticed the use of the word ”<em>behaviour</em>” all along the article, that’s because the strategy pattern is a <strong>behavioral</strong> pattern</li>\n<li>When you have different algorithms or methods for the same task, it would be small hint to implement a strategy pattern</li>\n<li>Your program can decide the implementation to use at the runtime</li>\n<li>\n<p><a href=\"https://www.youtube.com/watch?v=v9ejT8FO-7I\">This link</a> could show you a use of this pattern with Ducks (<a href=\"https://upload.wikimedia.org/wikipedia/commons/b/b1/Male_mallard_standing.jpg\">yeah, ducks!</a>)</p>\n<h4>Any remarks ?</h4>\n</li>\n</ul>\n<p>Make a <a href=\"!https://github.com/ackermannQ/quentinackermann\">pull request</a> or open an <a href=\"https://github.com/ackermannQ/quentinackermann/issues\">issue</a>!<br>\nDon’t know how to do it ? Check out this <a href=\"https://opensource.com/article/19/7/create-pull-request-github\">very well explained tutorial</a></p>","frontmatter":{"title":"[Design] - The Strategy Pattern","date":"May 04, 2021","description":"Let's be strategic for a while!"}},"previous":{"fields":{"slug":"/design-patterns/"},"frontmatter":{"title":"[Design] - Design Patterns"}},"next":{"fields":{"slug":"/observer-pattern/"},"frontmatter":{"title":"[Design] - The Observer Pattern"}}},"pageContext":{"id":"9e9cce27-c3f2-5887-8741-71194c577959","previousPostId":"36659e64-dc93-5590-8acf-89e3c45ee086","nextPostId":"b47693dc-d3bd-5453-b6af-05f0d46a58e4"}},"staticQueryHashes":["1163679704","25117437"]}